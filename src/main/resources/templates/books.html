<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Books</title>
<link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>
	<div class="d-flex">
		<h3>Books!</h3>
		<form th:action="@{/logout}" method="post">
			<input type="submit" value="Logout" />
			
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		</form>
	</div>
	
	<div class="booklist">
		<div th:each="book,iter:${bookList}" class="listItem">
			<div th:text="${book.name}"></div>
			<table>
				<tr>
					<td>
						<span>By:</span>
					</td>
					<td>
						<span 
							th:each="bookAuthor,iter:${book.bookAuthors}" 
							th:text="${bookAuthor.author.firstName} + ' ' + ${bookAuthor.author.lastName} + ${iter.last ? '' : ', '}"
						></span>
					</td>
				</tr>
			</table>
			<div><a th:href="@{/books/details?id={id}(id=${book.id})}">details</a></div>
			<form th:action="@{/books?id={id}&action=add(id=${book.id})}" method="post">
				<button type="submit">Add to favorites</button>
			</form>
			<form th:action="@{/books?id={id}&action=remove(id=${book.id})}" method="post">
				<button type="submit">Remove from favorites</button>
			</form>
		</div>
	</div>
	<hr>
	<a href="/books/popular">Most popular books</a>
	<br>
	<a th:if="${isAdmin}" th:href="@{/books/add}">
		<button type="submit">Add book</button>
	</a>
</body>
</html>